# Application Configuration
spring.application.name=fhir-generator
spring.output.ansi.enabled=ALWAYS

# Server Configuration
server.port=8080

# ScyllaDB Configuration
spring.cassandra.keyspace-name=fhir_generator
spring.cassandra.contact-points=scylladb
spring.cassandra.port=9042
spring.cassandra.local-datacenter=datacenter1
spring.cassandra.schema-action=create_if_not_exists

# External API Configuration
external.api.url=http://localhost:8081/api/fhir
external.api.timeout=15000

# Scheduler Configuration
scheduler.enabled=true
scheduler.initial-delay=30000
scheduler.min-interval-minutes=1
scheduler.max-interval-minutes=1
scheduler.min-batch-size=1000
scheduler.max-batch-size=2000

# ============================================
# Anomaly Generation Configuration
# ============================================
# These settings control automatic anomaly injection to trigger Shewhart detection

# Enable/disable automatic anomaly generation
episense.anomaly.enabled=true

# Percentage of cases that are anomalous (0.0 to 1.0)
# 25% creates strong signal while maintaining realistic baseline
episense.anomaly.percentage=0.25

# Ratio of severe (SIB_GRAVE) vs moderate (SIB_SUSPEITA) anomalies
# SIB_GRAVE has weight 2x in backend aggregation
episense.anomaly.severe-ratio=0.30

# Cities for outbreak concentration (pipe-separated city|state)
# Concentrating anomalies increases Shewhart detection probability
episense.anomaly.outbreak-cities=Trindade|GO,Goiania|GO

# Cities for normal data distribution
episense.anomaly.normal-cities=Sao Paulo|SP,Rio de Janeiro|RJ,Belo Horizonte|MG,Curitiba|PR,Porto Alegre|RS,Salvador|BA,Brasilia|DF

# Burst mode settings (sudden spikes for Shewhart)
# Probability of burst per batch (20% = ~1 in 5 batches)
episense.anomaly.burst-probability=0.20
# Anomaly rate during bursts (80% = mostly anomalies)
episense.anomaly.burst-anomaly-rate=0.80
# Size multiplier during bursts (3x normal volume)
episense.anomaly.burst-size-multiplier=3.0

# Clinical thresholds (must match backend ClinicalFlags.ClinicalThresholds)
episense.anomaly.leucocytosis-threshold=11000.0
episense.anomaly.neutrophilia-threshold=7500.0
episense.anomaly.left-shift-threshold=500.0

# Value ranges for anomaly generation
episense.anomaly.leucocytosis-range=12000.0,30000.0
episense.anomaly.neutrophilia-range=8000.0,25000.0
episense.anomaly.left-shift-range=600.0,2000.0

# Historical data generation (for Shewhart baseline)
episense.anomaly.historical-days=90
episense.anomaly.historical-daily-count=50
episense.anomaly.historical-anomaly-rate=0.05

# Logging Configuration
logging.level.root=INFO
logging.level.com.episense.fhirgenerator=DEBUG
logging.level.com.datastax.oss.driver=WARN

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
